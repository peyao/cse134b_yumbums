<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Add a habit</title>
		<link rel="stylesheet" href="../css/forms.css">
	</head>
	<body>

		<div class="forms">
			<h2>Add A Habit</h2>
			<form id="formADD" onsubmit="return validateForm()" action="testList.html" method="post">
				<p><label for="title"><span id="title_text">Habit Title</span></label></p>
				<p><input id="title" type="text" name="fullname" placeholder="Enter habit here" required></p>
				<p><label>Habit Icon</label></p>
				<div id="image-button">
					<label>
						<input id="imgRadio1" type="radio" name="imgRadio">
						<img id="icon1" class="icon" onclick="selectImage('icon1');" src="../img/sleep.jpg" alt="sleep image"/>
					</label>
					<label>
						<input id="imgRadio2" type="radio" name="imgRadio">
						<img id="icon2" class="icon" onclick="selectImage('icon2');" src="../img/salad.jpg" alt="eat image"/>
					</label>
					<label>
						<input id="imgRadio3" type="radio" name="imgRadio">
						<img id="icon3" class="icon" onclick="selectImage('icon3');" src="../img/run.jpg" alt="run image"/>
					</label>



						<img id="icon4" class="icon" src="../img/add.png" alt="find an image"/>




				</div>
				<p><label>Weekly Frequency</label></p>
				<div id="ck-button">
					<label> <input type="checkbox" name="date" value="sunday"><span>Sun</span></label>
					<label> <input type="checkbox" name="date" value="monday"><span>Mon</span></label>
					<label> <input type="checkbox" name="date" value="tuesday"><span>Tues</span></label>
					<label> <input type="checkbox" name="date" value="wednesday"><span>Wed</span></label>
					<label> <input type="checkbox" name="date" value="thursday"><span>Thur</span></label>
					<label> <input type="checkbox" name="date" value="friday"><span>Fri</span></label>
					<label> <input type="checkbox" name="date" value="saturday"><span>Sat</span></label>
				</div>
				<p><label>Daily Frequency</label></p>
				<div id="daily-button" >
					<label> <input type="radio" name="day" value="one" onclick="clearOther()"><span>1</span></label>
					<label> <input type="radio" name="day" value="two" onclick="clearOther()"><span>2</span></label>
					<label> <input type="radio" name="day" value="three" onclick="clearOther()"><span>3</span></label>
					<span id="times">Times</span>
				</div>
				<p><label for="others"><span id="others_text">Others: </span>
					<input id="others" type="number" step="1" min="1" max="100" name="day"
						   placeholder="Enter custom frequency" onclick="uncheckradio()"></label></p>
				<p id="save_p"><input id="save" type="submit" value="Save It"></p>
				
			</form>

		</div>
		<script>
			var imageSelect = null;
			function selectImage(name) {
				//Clear all the other effects
				document.getElementById('icon1').style.border = "none";
				document.getElementById('icon2').style.border = "none";
				document.getElementById('icon3').style.border = "none";
				imageSelect = null;
				var image = document.getElementById(name);
				image.style.border = "5px solid #42A5F5";
				imageSelect = image.getAttribute("src");
			}
			function uncheckradio() {
				var unradio = document.getElementsByName("day");
				for (var i = 0; i < unradio.length - 1; i++) {
					unradio[i].checked = false;
				}
			}
			function clearOther() {
				document.getElementById("others").value = null;
			}
			function validateForm() {

				//icon select validation
				if(imageSelect == null){
					alert("Choose an icon");
					return false;
				}


				// checkbox validation
				var checkboxes = document.getElementsByName("date");
				var checkedweekly = false;
				var i;
				for (i = 0; i < checkboxes.length ; i ++){
					if(checkboxes[i].checked){
						checkedweekly = true;
						break;
					}
				}
				if (!checkedweekly){
					alert("Enter weekly frequency");
					return false;
				}

				// radio button and others validation
				var daily = document.getElementsByName("day");
				var dailyOther = document.getElementById("others").value;
				var selectedradio = false;
				for (i = 0; i < daily.length - 1; i++){
					if (daily[i].checked) {
						selectedradio = true;
						break;
					}
				}
				if(!selectedradio && !dailyOther) {
					alert("Enter daily frequency");
					return false;

				}
                var habit = [{
                    title: document.getElementById("title").value,
                    icon: imageSelect,
                    weekFrequency: 3,
                    dayFrequency: 3,
                    otherFrequency: 0,
                    currentStreak: 10,
                    bestStreak: 20,
                    completedToday: 1
                }];
                var stringHabit = JSON.stringify(habit);
                localStorage.setItem("habitList", stringHabit);
  

            }
		</script>
	</body>
</html>
